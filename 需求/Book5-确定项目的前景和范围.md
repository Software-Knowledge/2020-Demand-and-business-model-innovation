Book5-确定项目的前景和范围
---

# 1. 引入：社区团购激战正酣
1. 团长：小区门口的便利店、彩票店、餐饮店主，佣金10%，提成收入200-350/天
2. 社区团购：最后一个没有被完全电商化的市场，规模可达万亿。
3. 品控、缺货、退货问题较为明显。

# 2. 华春莹八连问
1. 诱导式与双筒问题
2. 封闭问题
3. 探究式问题与抗辩

# 3. 确定项目前景和范围的活动

## 3.1. 为什么要确定项目的前景和范围
1. 在看待现实世界时：世界是复杂的，从不同的角度观察(目的与条件)，会看到不同的内容(抽象与映射)
2. 因此
   1. 如何保证项目涉众以符合项目需要的角度描述现实世界？
   2. 描述哪些事物和事件才会尽可能的符合项目的需要？
3. 方法是
   1. 定义项目前景：所有的涉众都从共同认同的项目前景出发，理解和描述问题域及需求
   2. 定义项目范围：范围内的事物和事件是描述的目标

## 3.2. 确定项目前景和范围的位置和作用
![](img/book5/1.png)

## 3.3. 确定项目前景和范围的关键
1. 定义业务需求和能够满足需求的高层解决方案，包括:
   1. 业务目标、目的
   2. 高层业务功能
   3. 每个高层业务功能所关联的高层数据
   4. 每个功能相关的项目涉众
   5. ......
2. **如果存在不同业务需求之间的冲突，那么在确定项目前景和范围阶段必须予以解决**：不然会导致软件很难甚至无法继续推进。

## 3.4. 业务需求冲突示例
1. 对一个配有嵌入式软件的售货机而言：
   1. 销售机开发者的业务目标：
      1. 向零售商出售或出租售货机，并由此获利。
      2. 通过售货机向顾客销售消费品。
      3. 吸引客户对商品的兴趣。
      4. 生产出多种类型的售货机。
   2. 零售商的业务目标：
      1. 将单位营业面积的收益最大化。
      2. 吸引更多的顾客来商店购买。
      3. 用售货机替代人工，带来销量和利润的增长。
   3. 可能产生的矛盾：开发者重技术、零售商要求简单可直接投入使用、顾客希望方便和功能性
2. 泡泡玛特即将上市

# 4. 确定项目前景与范围的过程
![](img/book5/2.png)

# 5. 本章总论
1. 确定项目的前景与范围，就是确定项目的**问题、目标、特性**
   1. (业务需求)问题：组织的战略目标、利益分配、政策规划、业务流程等高层问题
   2. 目标：问题的反面，用户的期望
   3. 特性：选定的、针对目标的解决方案所需要具备的功能特征，通常内聚于一个目标与任务，反映系统与外界一次有价值的完整互动过程(用户)
2. 针对项目的复杂程度，可以采用的分析手段由浅到深依次为**问题分析、目标分析、业务过程分析**
   1. 问题与目标明确$\Rightarrow$问题分析$\Rightarrow$用例图/上下文图
   2. 目标之间存在较为复杂的关系$\Rightarrow$目标分析$\Rightarrow$目标模型与目标实现
   3. 目标、特性之间存在紧密的联系$\Rightarrow$业务过程分析$\Rightarrow$UML活动图
   4. 分析过程越复杂，分析结果的形式化程度越高，变更的成本也越大
3. 此外，还需要分析非功能需求，定义系统边界，生成前景与范围文档

# 6. 问题分析
> 过程描述

![](img/book5/3.png)

## 6.1. 获取问题
1. 通过收集背景资料或者与涉众沟通来实现
2. 收集背景资料时要收集业务描述及其统计数据关注业务困难与问题。与涉众的沟通主要通过面谈
3. 示例：×××连锁商店是一家刚刚发展起来的小型连锁商店，其前身是一家独立的小百货门面店。原商店只有销售的收银部分使用软件处理，其他业务都是手工作业，这已经不能适应它的业务发展要求。首先是随着商店规模的扩大，顾客量大幅增长，手工作业销售迟缓，顾客购物排队现象严重，导致流失客源。其次是商店的商品品种增多，无法准确掌握库存，商品积压、缺货和报废的现象上升明显。再次是商店面临的竞争比以前更大，希望在降低成本，吸引顾客，增强竞争力的同时，保持盈利水平。
   1. P1：手工作业销售迟缓，效率不高。
   2. P2：商店的商品品种太多，无法准确掌握库存。
   3. P3：成本不够低，导致竞争力不强，盈利水平不够。
   4. P4：顾客不够多，销售额不高，盈利水平不够。

## 6.2. 明确问题

### 6.2.1. 对问题达成共识
> 描述问题：在涉众之间取得认同

![](img/book5/4.png)
![](img/book5/5.png)

### 6.2.2. 收集背景资料，判断问题的明确性 
> 问题的明确性要求它们具备一下两点：
1. 易于理解；
   1. P1. 图书管理员：图书总是无法上架。
   2. P2. 图书管理员：
      1. 图书的内容分类不合适，无法分类上架
      2. 图书上架的工作太繁杂，导致来不及上架。
      3. 图书的借阅不遵守章程，不能保证上架。
2. 能指明解决的方向
   1. P3. 决策者：生产的废品过多。 

### 6.2.3. 分析不明确问题，发现问题背后的问题
> 对于不明确的问题

1. 直接咨询涉众是第一选择
2. 利用收集的资料和业务数据是第二选择
3. 必要时需要使用一些简单的问题分析技巧

### 6.2.4. 发现深层问题的示例
1. 当前问题：产生了太多的废品
2. 进一步问题：产生太多废品的原因？
   1. 用鱼骨图列出所有的可能原因
   2. 请用户确认(通常可以解决问题)
   3. 如果用户无法确认，则搜集数据进行分析
   4. 重新定义新的问题(不准确的销售订单)

![](img/book5/6.png)

## 6.3. 发现业务需求
1. 每一个明确、一致的问题都意味着涉众存在一些相应的期望目标，即业务需求。
2. 一般情况下，业务需求就是问题的反面
   1. P3. 决策者：生产的废品过多
      1. BR2：提供销售订单的准确性，在系统使用后3个月内，减少50%因此而产生的废品。
3. 注意：**业务目标要具有第二章所述的各种优秀特性，尤其是要有可验证性**

## 6.4. 定义解决方案及系统特性

### 6.4.1. 确定高层次的解决方案
1. 发现各种可行的高层次解决方案，分析不同方案的业务优势和代价，然后通过和涉众的协商，选定其中一个 
   1. 分析涉及的人员与任务，综合考虑，给出解决方案
   2. 创造性过程：依赖于个人的技术水平、经验和综合素质

![](img/book5/7.png)
![](img/book5/8.png)

### 6.4.2. 提供解决方案候选,但要由用户确定最终结果
1. 背景：对一个设备制造商的IS系统升级
2. 问题：改进同经销商之间的通信
3. 涉众：制造商、经销商
4. 开发人员提出的解决方案：
   1. 提供更好的财务报告、更好的发票和陈述的格式、在线的零件订购以及电子邮件
   2. 最终希望能实现公司和经销商间的电子资金转账
5. 客户讨论修正后的方案：
   1. 首要任务是提供电子资金转账
   2. 最好能有电子邮件及其它的通信特性

### 6.4.3. 定义系统特性
1. 明确该解决方案需要具备的功能特征，即系统特性 
2. 特性是对一系列内聚的相互联系的需求(要求)、领域特征和规格的总称[Classen2008]。通常，一个特性内聚于一个目标与任务，反映了系统与外界一次有价值的完整互动过程(一组**任务的要求**)。

### 6.4.4. 解决方案的边界
1. 分析解决方案需要和周围环境形成的交互作用，定义解决方案的边界
2. 面向对象方法：用例图
   1. 涉及哪些用户？
   2. 用户的目标有哪些？需要执行的任务有哪些？
   3. 建立用例图(角色：用户；用例：目标-任务)
3. 结构化方法：上下文图(DFD)
   1. 它需要的信息由谁提供？
   2. 它产生的信息由谁使用？
   3. 谁控制它的执行？
   4. 谁会影响它的执行？

#### 6.4.4.1. 面向对象边界描述：用例图
> 外部角色在与解决方案的交互中完成的任务与目标

![](img/book5/9.png)

#### 6.4.4.2. 结构化边界描述：上下文图
> 关注解决方案与环境之间的信息流输入/输出

![](img/book5/10.png)

### 6.4.5. 确定解决方案的约束
![](img/book5/11.png)

> 对"新的销售订单系统"的约束

![](img/book5/12.png)

## 6.5. 案例分析
> 仍然是针对之前的部分

### 6.5.1. 业务需求
1. BR1：在系统使用6个月后，商品积压、缺货和报废的现象要减少50%
2. BR2：在系统使用3个月后，销售人员工作效率提高50%
3. BR3：在系统使用6个月后，店铺运营成本要降低15%
   1. 范围：人力成本和库存成本
   2. 度量：检查平均每个店铺的员工数量和平均每10,000元销售额的库存成本
4. BR4：在系统使用6个月后，销售额度要提高20%
   1. 最好情况：40%
   2. 最可能情况：20%
   3. 最坏情况：10%

![](img/book5/14.png)

### 6.5.2. 涉及的用户及其任务
1. BR1：在系统使用6个月后，商品积压、缺货和报废的现象要减少50%
   1. 客户经理：库存入库、出库、分析
   2. 总经理：库存分析、促销、产品调整
2. BR2：在系统使用3个月后，销售人员工作效率提高50%
   1. 销售人员：销售、退货
3. BR3：在系统使用6个月后，店铺运营成本要降低15%
   1. 范围：人力成本和库存成本
   2. 依赖于上两个目标的解决方案
4. BR4：在系统使用6个月后，销售额度要提高20%
   1. 扩大销售：总经理：促销
   2. 吸引回头客：客户经理：顾客管理(发展会员、礼品赠送)

### 6.5.3. 系统特性
1. SF1：分析店铺商品库存，发现可能的商品积压、缺货和报废现象：BR1，BR3
2. SF2：根据市场变化调整销售的商品：BR1，BR3，BR4
3. SF3：制定促销手段，处理积压商品：BR1，BR3，BR4
4. SF4：与生产厂家联合进行商品促销：BR1，BR3，BR4，CH
5. SF5：制定促销手段进行销售竞争：BR1，BR4，CH
6. SF6：掌握员工变动和授权情况：BR2
7. SF7：处理商品入库与出库：BR1
8. SF8：发展会员，提高顾客回头率：BR4，CR
9. SF9：允许积分兑换商品和赠送吸引会员的礼品，提高会员满意度：BR3，BR4，CR
10. SF10：帮助收银员处理销售与退货任务：BR2

### 6.5.4. 问题的用例图
![](img/book5/15.png)

### 6.5.5. 系统边界
> 由多个问题合并而来

![](img/book5/16.png)

## 6.6. 商业模式画布与问题分析
1. 利用商业模式画布的九模块与模块之间的联系中抽取问题(**问题分类**)
2. 利用商业模式的内、外评估与蓝海战略确定业务需求、生成系统特性、确定系统边界与开发约束(**用于评估与量化的检查列表**)
3. 将生成的业务需求、系统特性、系统边界、开发约束与商业模式画布建立起联系，从而显式地维护各个元素之间的关联关系(**可追踪**)

![](img/book5/17.png)

> 网易严选的调整：复用渠道，强化产品，弱化自有电商。

# 7. 目标分析
1. 面向目标的方法(Goal-Oriented Requirements Engineering)
2. 为什么需要目标？
   1. 业务需求？
      1. 不够严谨
      2. 无法形成方法学支持(建模)
   2. 面向目标的方法
      1. 将"目标"严格定义:单位、组织方式->目标模型
      2. 建立方法学支持:模型的建立与应用

![](img/book5/18.png)

## 7.1. 面向目标的方法
1. 从早期就指导RE活动
   1. 有利于需求的获取
   2. 指导后期活动
2. 关注Why，深层次分析组织及其涉众的目标、候选方案和隐式因素：深入理解涉众关注
3. 得到业内的重视
   1. 很多现存的方法学也开始整合对目标的分析与处理技术。目标概念在需求工程方法中的广泛被接受现象说明：目标已经成为了需求工程常用的核心概念"[Kavakli2002]。
   2. 目标将会补充传统方法中的实体(Entities)概念和行为(Activities)概念，一起成为需求工程建模与分析的基本对象类别[Yu1998]。
   3. KAOS[Dardenne93, van Lamsweerde1995]、NFR[Mylopoulos1992, Chung2000]、I*[Yu1997]、GBRAM[Anton1996, Anton1997]

## 7.2. 目标
> 目标：是系统被开发的目的

1. 它有着明确的定义方式 
2. 名称、类型、关注、定义(正式与非正式))、优先级、主体、拥有者等

![](img/book5/19.png)
![](img/book5/20.png)

## 7.3. 目标可以有不同的抽象层次
1. 高层次目标
   1. 战略性的,全局的, 业务相关的
   2. 增加50%的传输能力
2. 低层次目标
   1. 技术性的，局部的，产品设计相关的
   2. 加速器每3秒发出一次命令

```
G1：降低5%的运营成本
Goal Achieve[OperationCostDecrease]
类型： SatisfactionGoal
非正式定义：降低5%的运营成本
关注：OperationCost
正式定义：∀ c: OperationCost
         Decrease(c)
         ⇒◊ DecreasePercent(c)>=5
G2：在商品距离报废期还有10天时，业务经理应该得到提示
Goal Achieve[CommodityOutofDateNoticed]
类型： SatisfactionGoal
非正式定义：在商品距离报废期还有10天时，业务经理应该得到提示
关注：Commodity, GeneralManager
正式定义：∀ c:Commodity, m: GeneralManager
         c.guaranteePeriod()<=10
         ⇒◊ Notify(m, c)
```

## 7.4. 目标有不同的类型
1. 功能目标(Functional Goal)
   1. 描述预期的系统行为
   2. 满足型目标(Satisfaction Goal)和信息型目标(Information Goal) 
2. 非功能目标(Non-functional Goal) 
   1. 常见的是质量目标(Quality goals)和约束目标(Constraint goals)
   2. 安全目标(Safety Goal)、性能目标(Performance Goal)、可用性目标(Usability Goal)等等 
3. 软目标(Soft Goal)和硬目标(Hard Goal)：能否利用技术手段确认是否满足
4. 目标的类型
   1. 实现目标(Achieve Goal)
   2. 对应终止目标(Cease Goal)
   3. 维护目标(Maintain Goal)
   4. 对应避免目标(Avoid Goal)
   5. 优化目标(Optimize Goal) 

## 7.5. 目标规格的基本模式

| 模式           | 符号描述       | 含义                                      |
| -------------- | -------------- | ----------------------------------------- |
| 实现(Achieve)  | P ⇒ ◊Q         | 如果将来某一时刻Q为真(被满足)，则目标实现 |
| 终止(Cease)    | P ⇒ ◊¬Q        | 如果将来某一时刻Q为假(被终止)，则目标实现 |
| 保持(Maintain) | P ⇒ □Q         | 将来任一时刻Q都为真，则目标实现           |
| 避免(Avoid)    | P ⇒ □¬ Q       | 将来任一时刻Q都为假，则目标实现           |
| 优化(Optimize) | 最大化Maximize | (目标功能) 或 最小化Minimize (目标功能)   |

## 7.6. 目标模型的关系
1. 精化(Refinement)关系
2. 阻碍(Obstruction)关系
3. 支持与冲突(Support/Conflict)关系

## 7.7. 目标精化
1. 一个高层次目标G可以精化为低层次目标{G1,G2,…,Gn}：
   1. 如果一系列子目标{G1,G2,…,Gn}的完成有助于目标G的完成，那么G与{G1,G2,…,Gn}之间就是AND 精化关系。此时任意两子目标Gi与Gj之间是互补的。
   2. 如果更进一步，子目标{G1,G2,…,Gn}的完成能够直接保证G的完成{G1,G2,…,Gn}|=G，那么G与{G1,G2,…,Gn}之间就是完备(Complete)AND 精化关系。
2. 如果任一子目标Gi都是G的替代方案，那么G与{G1,G2,…,Gn}之间就是OR 精化关系。此时，任意两子目标Gi与Gj之间是互相替代的。

## 7.8. 目标精化是目标模型的重要任务之一(Goal-oriented -> agent-oriented)
1. 目标的达成需要主体(agent)的参与
   1. 人,设备, 其他软件系统…
   2. 目标G1(超市降低5%成本)：库存管理员、商品销售系统、收银员、信用卡刷卡器、税务系统接口......
2. 越是抽象、粗粒度、范围广的目标，参与的主体越多
3. 如果一个目标的主体只有待开发的软件系统一个，那么该目标就可以等同于需求(要求)了。
4. 如果一个目标的主体只有系统环境中的一个对象(例如用户)，那么该目标就可以等同于假设(Assumption)与依赖(Dependency)了
5. 区分目标的主体与拥有者，拥有者通常是涉众，这些涉众期望目标达成但不一定参与目标达成过程

## 7.9. 示意图
![](img/book5/21.png)

> 云朵就是软目标，最好写实现xxx

## 7.10. 目标阻碍
1. 如果子目标O的达成会使得高层目标G失败`O|=¬G`，那么O与G的关系就是阻碍关系
2. 阻碍目标也可以继续AND精化、OR精化
3. 阻碍关系本身是一种特殊的精化——反向精化

![](img/book5/22.png)

## 7.11. 目标支持与冲突:目标模型的重要任务之二
1. 多个目标之间关系
2. Support链接表示一个目标对其他目标的支持作用，支持关系可以被处理为OR精化关系
3. Conflict链接表示一个目标的实现对其他目标的实现有阻碍作用
4. ++(Make)：一个目标的成功可以直接保证另一个目标的成功；
5. +(Help)：一个目标的成功可以让另一个目标更容易成功
6. －(Hurt)：一个目标的成功会使得另一个目标的成功更加困难；
7. ― ―(Break)：一个目标的成功会直接导致另一个目标的失败。

![](img/book5/23.png)

## 7.12. 目标与其他元素的关系
1. 主体（Agent）
2. 场景（Scenario）
3. 操作（Operation）
4. 任务（Task）
5. 资源（Resource）
6. UML元素

## 7.13. 目标与主题关系
1. Assignment链接表示为实现目标而需要参与主体。
   1. OR Assignment：多个主体中的一个来完成。
   2. AND Assignment：多个主体一起共同完成

![](img/book5/24.png)

## 7.14. 目标与操作关系
1. AND Operationalization链接和OR Operationalization链接
2. 目标实现过程中需要执行的操作，G|= {Spec(Op1), ..., Spec(Opn)}

![](img/book5/25.png)

## 7.15. 目标与场景关系
> Cover链接表示场景涉及所有行为都是目标所包含的操作的子集

![](img/book5/26.png)

## 7.16. 目标与数据模型
> Concerns链接用来描述目标与应用领域对象（数据资源）之间的关系

![](img/book5/27.png)

## 7.17. 目标分析过程
![](img/book5/28.png)

## 7.18. 面向目标的分析方法
> 面向目标方法的处理过程 

1. 高层目标的获取：现状和背景的分析：问题与缺陷
2. 低层目标的获取 ：需求获取与目标分析
   1. 已有目标的验证和细化 （基于目标分析）
   2. 基于场景的方法等等 （基于目标实现）
3. 目标分析：精化与分解，建立系统的目标模型 
4. 目标实现：收集与目标相关的需求信息，讨论可能的候选解决方案，确定最终的系统详细需求和解决方案

### 7.18.1. 高层目标的获取
1. the highest level goal that can be ascribed to an enterprise is the wish to survive
2. 现状和背景的分析：问题与缺陷
   1. Achieve goal && Maintain goal
3. Identifying maintain goal
   1. The enterprise norms are maintained by regulating its relationships with other enterprises in its environment. 
      1. Maintain relationships with customers, with suppliers, employees, with investors etc.
 
### 7.18.2. 面向目标的方法
1. ×××连锁商店是一家刚刚发展起来的小型连锁商店，其前身是一家独立的小百货门面店。原商店只有销售的收银部分使用软件处理，其他业务都是手工作业，这已经不能适应它的业务发展要求。首先是随着商店规模的扩大，顾客量大幅增长，手工作业销售迟缓，顾客购物排队现象严重，导致流失客源。其次是商店的商品品种增多，无法准确掌握库存，商品积压、缺货和报废的现象上升明显。再次是商店面临的竞争比以前更大，希望在降低成本，吸引顾客，增强竞争力的同时，保持盈利水平。

#### 7.18.2.1. 分析问题确定首批目标
1. BR1：在系统使用6个月后，商品积压、缺货和报废的现象要减少50%
2. BR2：在系统使用3个月后，销售人员工作效率提高50%
3. BR3：在系统使用6个月后，店铺运营成本要降低15%
   1. 范围：人力成本和库存成本
   2. 度量：检查平均每个店铺的员工数量和平均每10,000元销售额的库存成本
4. BR4：在系统使用6个月后，销售额度要提高20%
   1. 最好情况：40%
   2. 最可能情况：20%
   3. 最坏情况：10%

#### 7.18.2.2. 高层目标模型
![](img/book5/29.png)

### 7.18.3. 目标精化：低层目标的识别与层次结构建立
1. 从对高层目标的描述中：
   1. 面谈报告
   2. 企业规章、政策
   3. 任务描述
   4. 业务过程分析（例如工作流图）
   5. 场景描述
2. 识别
   1. 精化关系

#### 7.18.3.1. 从面谈报告中发现目标
![](img/book5/30.png)

#### 7.18.3.2. 从场景描述中发现目标
![](img/book5/31.png)

#### 7.18.3.3. 发现精化关系
1. 发现AND精化关系：
   1. 同一个目标有不同场景：每个Gi代表一个典型场景，任意Gi与Gj代表不同的场景；
   2. 完成目标有连续过程：每个Gi代表G完成过程中的一个状态，Gi、Gi+1代表两个连续的状态；
   3. 完成目标需要有多个方面紧密配合：Gi与Gj紧密联系或互相支持；
   4. 目标有不同质量环境及表现：每个Gi代表不同质量要求下的G的完成。
2. 发现OR精化关系：多种可以相互替代的"候选办法"
3. 收银员有两个场景：AND精化

![](img/book5/32.png)

4. “减少积压缺货、积压与报废”有多个步骤$\Rightarrow$AND精化
5. 持有库存数据$\Rightarrow$分析数据尽早发现可能的缺货、积压与报废$\Rightarrow$预先处置可能的缺货、积压与报废

![](img/book5/33.png)

6. "减少人力成本"的实现需要减少人员与提高人员工作效率两个方面的紧密结合 $\Rightarrow$ AND精化

![](img/book5/34.png)

7. 目标"提高销售额"可以让更多的人来买和(单人)卖的更多两个方面分别找替代方法 $\Rightarrow$ OR精化

![](img/book5/35.png)

> Summary

![](img/book5/36.png)

### 7.18.4. 目标精化(续)
1. 考虑阻碍目标实现的情况（avoid目标）
2. 考虑已有目标之间的支持与冲突关系
3. 对高层目标问"how"，对低层目标问"Why"，建立层次结构

![](img/book5/37.png)

### 7.18.5. 目标精化的结束条件
1. 子目标展开到单一**事务**时终止
   1. Agents与System的一次协作活动
   2. 连续活动，要求全部成功（要么全部失败）
   3. 确认这些单一事务能够增加业务价值
2. 单一事务可以被进一步展开为场景（任**务的要求=>单个任务的描述**）

### 7.18.6. 目标精化的约束
1. 注意识别目标隐含的：
   1. 假设与依赖，例如：
      1. 商业规则，特定场景限定
      2. 市场与环境假设，业务过程假设…
   2. 质量属性
   3. 约束：资源依赖

### 7.18.7. 目标实现
> 将最底层目标分配给主体（人+系统）

![](img/book5/38.png)

# 8. 为隆中对构建目标模型与分析

# 9. 基于目标模型获取非功能需求——NFR(Non-Functional Requirements)
1. No adequate methods are provided：Functional analysis or object-oriented analysis are limited as soon as nonfunctional concerns are regarded
2. NFRs are difficult to express. Reasons:
   1. 非功能需求不集中，在系统中散布，难以界定它们的边界，也就难以描述和处理
   2. 非功能需求不独立，依赖于功能需求，处理非功能需求时很难脱离功能需求进行独立考虑
   3. 作为非功能需求主体的质量需求比较复杂，需要被分解为特征-子特征的层次结构
   4. 非功能需求不独立，相互冲突、依赖，需要建立不同非功能需求之间的关系描述

## 9.1. NFR
1. 将非功能需求建模为目标
   1. 在早期信息较为抽象和不充分时建模为软目标，后期添加目标满足标准修正为硬目标，这样符合需求开发的基本过程。
   2. 让非功能目标支持、阻碍或精化功能目标，描述非功能需求对功能需求的依赖关系。
   3. 让单个非功能目标依赖多个不同的功能目标，描述非功能需求的散布特性。
   4. 使用支持、阻碍（冲突）精化描述不同非功能目标之间的折中与冲突关系。
   5. 依赖质量模型，高层非功能目标精化为子非功能目标，描述非功能需求的层次结构关系

## 9.2. 几个例子
> 高层目标对底层目标的分解

![](img/book5/39.png)
![](img/book5/40.png)

# 10. 业务过程分析

## 10.1. 活动图(不考)
1. 基于数据流图$\Rightarrow$业务过程模型（Business Process Model）$\Rightarrow$UML 活动图
2. 反映复杂的工作流
3. 核心思想是令牌平衡 Token balance!

### 10.1.1. 活动图节点
1. 动作（Action）节点：数据处理，任务
2. 控制（Control）节点：协同流转
   1. 初始（Initial）
   2. 结束（Final）
   3. 决策（Decision）
   4. 合并（Merge）
   5. 分叉（Fork）
   6. 汇合（Join）
3. 对象（Object）节点：是指一个特定对象的实例

![](img/book5/41.png)
![](img/book5/42.png)

### 10.1.2. 活动图示例
![](img/book5/43.png)

### 10.1.3. 令牌平衡
1. 一个控制流传递一个令牌。
2. 一个对象流传递一个令牌。
3. 决策节点从流入流接收到一个令牌后传递给多个流出流中的一个。
4. 合并节点从多个流入流中只要接收到一个令牌就传递给流出流。
5. 分叉节点从流入流接收一个令牌后，复制出多份令牌，给每个流出流都传递一个令牌
6. 汇合节点从每个流入流都接收一个令牌，或者流入流的令牌接收情况符合汇合规格，就向流出流传递一个令牌。

### 10.1.4. 令牌不平衡
> 令牌不平衡意味着业务工作缺陷：丢失—有工作被忽视；缺少—有并发活动开始没有被认识到；多余—有并发活动结束没有被认识到

![](img/book5/44.png)

> 解决令牌不平衡问题

![](img/book5/45.png)

### 10.1.5. 复杂的令牌机制
![](img/book5/46.png)

### 10.1.6. 信号与事件机制
![](img/book5/47.png)

### 10.1.7. 异常与中断机制
![](img/book5/48.png)

### 10.1.8. 分区
![](img/book5/49.png)
![](img/book5/50.png)
![](img/book5/51.png)

### 10.1.9. 层次结构
> 将单个复杂业务过程分解为多个更简洁的活动图

![](img/book5/52.png)
![](img/book5/53.png)

## 10.2. 建立活动图
1. 确定活动图的上下文环境 
   1. 界定业务流程的处理界限 
2. 分析业务流程中的主要处理步骤 
3. 分析业务流程中的主要数据流 
4. 识别参与者，进行职责分配，将业务流程的处理步骤划分到不同的泳道，并将处理步骤和数据流的传递组织起来，建立活动图 
5. 添加活动图的详细信息，完善活动图描述，
6. 尤其要注意下列工作：
   1. 分析不同动作之间的协同是同步还是异步，同步使用控制流和数据流，异步使用信号与事件。
   2. 分析是否存在业务过程失败场景，添加流终结节点。
   3. 分析是否存在较为复杂的行为，为其建立活动。
   4. 分析业务过程中是否有异常，补充异常处理。
   5. 始终要检查令牌平衡，修正不平衡的节点。 

| ![](img/book5/54.png) | ![](img/book5/55.png) |
| --------------------- | --------------------- |
| ![](img/book5/56.png) | ![](img/book5/57.png) |
| ![](img/book5/58.png) | ![](img/book5/59.png) |
| ![](img/book5/60.png) |                       |

## 10.3. Activity Diagram And Goal
1. Activities are behaviors and so they should be described as goals
2. Actors(Partition) of actions are agents of goals

![](img/book5/61.png)

# 11. 定义系统边界
1. 问题分析与系统边界定义：每个问题的解决方案边界的合并
2. 目标分析与系统边界定义
   1. 边界目标：存在系统与环境的互动。
   2. 边界目标所覆盖的场景和操纵的操作 、关注的数据对象：建立系统边界定义。
3. 业务过程分析与系统边界定义：依据其动作和对象流完善边界定义

## 11.1. 系统用例图示例
![](img/book5/62.png)

## 11.2. 上下文图示例
![](img/book5/63.png)

> 使用相对比较少

# 12. 前景和范围文档
1. 业务需求、高层次解决方案和系统特性都应该被定义到项目前景与范围文档之中 
2. 前景与范围文档主要由需求工程师来完成，但文档的负责人一般是项目的投资负责人、执行主管或其他类似角色 
3. 文档中记录的应该是清晰、明确的业务需求、高层次解决方案和系统特性
4. 项目合约或抽象的业务用例文档也可以实现类似目的 

## 12.1. 文档结构
![](img/book5/64.png)

## 12.2. 示例
1. A vision and scope document
2. RUP V&S Document Template
3. And an example

## 12.3. 实践中确定项目的前景与范围
1. 在公司内部，为确定项目的前景和范围，一般通过用户开会，进行摸底。由于公司的用户一般都是非计算机专业出生，一般对于项目的前景和范围，主要从实际工作出发，提出构想和思路，但是有个明显的问题是，有些构想太过理想化，有些思路又太过细节。
2. 面临最大的挑战就是：由于公司业务的快速变更和快速拓展，公司内部员工提出的需求，比较难落到实处，太虚的目标都比较大，细节的需求又太细。
3. 所以，我们的项目需求收集人员，不仅要能熟悉业务，而且要懂得归纳，懂得演绎，确实存在不少困难。

# 13. 本章小结
1. 确定项目的前景和范围是需求工程以及整个项目的重要工作，它决定着整个项目后继工作的方向
2. 确定项目的前景和范围
   1. 简单情况下可以使用问题分析方法
   2. 复杂情况下需要基于目标模型进行
   3. 如果涉及复杂工作流程，就需要进行业务过程分析
   4. 如果涉及复杂非功能需求，可以借助目标模型来进行
3. 项目的前景和范围需要以文档的方式明确的固定下来

# 14. 思考：为新的直接销售和财务处理系统制定解决方案
1. Especially for You Jewelers是大学城的一个小珠宝零售商。在过去的两年里，Especially for You在它的商业方面经历了极大的发展，可是，它的财务业绩却与它的发展不同步。现在的事务处理系统部分手动、部分自动，不能有效的追踪客户账单和收据，Especially for You难以确定为什么它的成本这么高。此外，Especially for You频繁地实行特价以吸引顾客。它不知道这些特价是否有利可图，是否带来其他的销售。Especially for You也想增加回头客，所以它需要一个客户数据库。Especially for You想按照一个新的直接销售和财务处理系统以帮助解决这些问题。

## 14.1. 描述业务需求，描述解决方案
1. IT部门经理在部门会议上说道：“我有一些好消息，也有一些坏消息。好消息是公司高层今天早晨已经批准了‘工资管理系统项目’。新系统要减少文书工作的时间和错误，提升工资管理部门的士气，避免可能的违约漏洞与损失。坏消息是为满足新的国家法律报表要求系统必须在12月底前完成，成本要控制在预算之内，新系统要能够与已有系统交互，并且财务经理坚持要审查最终的设计方案。”

## 思考
1. 为什么要界定系统边界？系统与环境互动的界限，明确系统需要满足的与外界的交互行为，从而从宏观上界定了系统的功能概要。需求分析逐一细化系统边界中的对外交互行为的活动
2. 为什么结构化分析与面向对象都要从系统边界开始？
3. 你被任命为替换学生财务资助项目的项目经理。你想开发一个工作陈述来定义范围并降低范围蔓延的风险。
4. 财务资助部门的主管坚持要你15个月、600 000美元的预算内替换他现有的系统就可以了。他说这就是你需要知道的全部，不需要浪费时间开发一个工作陈述了。
5. 省略工作陈述的风险是什么？你将如何说服主管？
6. 一个需求工程师正在为一个信息系统考虑三个可选的解决方案，所有三个方案都满足了用户的业务需求。
   1. 第一个方案被认为与开发人员的技术知识最一致，
   2. 第二个方案被认为是最快的实现方案，
   3. 第三个方案是最划算的方案。
7. 这三个方案中是否有一个可行方案？如果是这样，你认为需求工程师应该如果做出最后决定？
8. 某大银行的一位银行卡办公室的收账经理Liz遇到了一个问题。她每周都收到一份过期未付款的账户名单。
9. 这份报告已经从两年前的250个账户增加到现在的1250个账户。为了确定那些严重拖欠债务的账户，Liz需要通读这份报告。严重拖欠债务的账户由几个不同的规则确定，每个规则都要求Liz检查客户的一项或几项数据。过去半天的工作量现在增加到了每周三天。即使在确定了严重拖欠债务的账户后，如果没有查阅该账户三年内的历史资料，Liz也不能做出最后的信用决定（例如严厉的催款电话、断绝信用或将这个账户转给一个收账代理）。另外，Liz需要报告所有账户中过期未付款的、拖欠债务的、严重拖欠债务的和呆死账的比例。目前的报告中并没有给她提供这个信息。
10. 假设现在需要你来开发一个软件，解决Liz面对的难题。那么你认为Liz现在遇到的问题有哪些？你希望新的软件应该达成哪些业务目标？你怎样设计软件的高层解决方案和系统特性？

